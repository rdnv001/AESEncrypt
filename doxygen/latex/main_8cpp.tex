\doxysection{src/main.cpp File Reference}
\hypertarget{main_8cpp}{}\label{main_8cpp}\index{src/main.cpp@{src/main.cpp}}


Программа для шифрования и дешифрования файлов с использованием AES-\/256 и IV, сгенерированного случайным образом.  


{\ttfamily \#include $<$openssl/conf.\+h$>$}\newline
{\ttfamily \#include $<$openssl/evp.\+h$>$}\newline
{\ttfamily \#include $<$openssl/err.\+h$>$}\newline
{\ttfamily \#include $<$openssl/rand.\+h$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{main_8cpp_a974da6559bcaf399ddf38dd5c4bbc70c}\label{main_8cpp_a974da6559bcaf399ddf38dd5c4bbc70c} 
void {\bfseries display\+\_\+errors} ()
\begin{DoxyCompactList}\small\item\em Вывод ошибок Open\+SSL в stderr и завершение программы. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_af41542723b81cb91043ed4bab58d2239}{generate\+\_\+key\+\_\+from\+\_\+password}} (const std\+::string \&pwd, unsigned char \texorpdfstring{$\ast$}{*}k)
\begin{DoxyCompactList}\small\item\em Генерация ключа из пароля с использованием PBKDF2 и хэша SHA1. \end{DoxyCompactList}\item 
std\+::vector$<$ unsigned char $>$ \mbox{\hyperlink{main_8cpp_a2a8ae79f079ab100a788761235fae141}{read\+\_\+file}} (const std\+::string \&fname)
\begin{DoxyCompactList}\small\item\em Чтение данных из файла в бинарном режиме. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a2eeacbb4857eccecbc944de27f7aadaf}{save\+File}} (const std\+::string \&fname, const std\+::vector$<$ unsigned char $>$ \&data)
\begin{DoxyCompactList}\small\item\em Запись данных в файл в бинарном режиме. \end{DoxyCompactList}\item 
std\+::vector$<$ unsigned char $>$ \mbox{\hyperlink{main_8cpp_a32eb7a5143a5670018a325c0baccb0b6}{encrypt\+\_\+with\+\_\+iv}} (const std\+::vector$<$ unsigned char $>$ \&plaintext, unsigned char \texorpdfstring{$\ast$}{*}k, unsigned char \texorpdfstring{$\ast$}{*}iv)
\begin{DoxyCompactList}\small\item\em Шифрование данных с использованием AES-\/256 и записью IV в начало зашифрованного файла. \end{DoxyCompactList}\item 
std\+::vector$<$ unsigned char $>$ \mbox{\hyperlink{main_8cpp_ac352495574fe85c1cd88f5d356d5231b}{decrypt\+\_\+with\+\_\+iv}} (const std\+::vector$<$ unsigned char $>$ \&cipher\+Text, unsigned char \texorpdfstring{$\ast$}{*}k)
\begin{DoxyCompactList}\small\item\em Дешифрование данных с использованием AES-\/256 и IV, который хранится в начале файла. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_a488d4a88ccc2c3c5ca06be00a4623e22}{display\+\_\+usage}} (const char \texorpdfstring{$\ast$}{*}prog)
\begin{DoxyCompactList}\small\item\em Вывод инструкции по использованию программы. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char \texorpdfstring{$\ast$}{*}argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Основная функция программы для шифрования и дешифрования файлов с использованием AES-\/256. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{main_8cpp_a8bc6047ebe0bd984ad1787d297eac97a}\label{main_8cpp_a8bc6047ebe0bd984ad1787d297eac97a} 
constexpr int {\bfseries KEY\+\_\+\+LENGTH} = 32
\begin{DoxyCompactList}\small\item\em Длина ключа для AES-\/256. \end{DoxyCompactList}\item 
\Hypertarget{main_8cpp_ad376bf8147d42e72c89fa21f703192b6}\label{main_8cpp_ad376bf8147d42e72c89fa21f703192b6} 
constexpr int {\bfseries BLOCK\+\_\+\+SIZE} = 16
\begin{DoxyCompactList}\small\item\em Размер блока для AES. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Программа для шифрования и дешифрования файлов с использованием AES-\/256 и IV, сгенерированного случайным образом. 

Используются библиотеки Open\+SSL для криптографических операций и getopt для обработки аргументов командной строки. 

\doxysubsection{Function Documentation}
\Hypertarget{main_8cpp_ac352495574fe85c1cd88f5d356d5231b}\index{main.cpp@{main.cpp}!decrypt\_with\_iv@{decrypt\_with\_iv}}
\index{decrypt\_with\_iv@{decrypt\_with\_iv}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{decrypt\_with\_iv()}{decrypt\_with\_iv()}}
{\footnotesize\ttfamily \label{main_8cpp_ac352495574fe85c1cd88f5d356d5231b} 
std\+::vector$<$ unsigned char $>$ decrypt\+\_\+with\+\_\+iv (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ unsigned char $>$ \&}]{cipher\+Text}{, }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{k}{}\end{DoxyParamCaption})}



Дешифрование данных с использованием AES-\/256 и IV, который хранится в начале файла. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cipher\+Text} & Зашифрованные данные, включая IV. \\
\hline
\mbox{\texttt{ in}}  & {\em k} & Ключ для дешифрования. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Вектор с расшифрованными данными (открытым текстом). 
\end{DoxyReturn}
\Hypertarget{main_8cpp_a488d4a88ccc2c3c5ca06be00a4623e22}\index{main.cpp@{main.cpp}!display\_usage@{display\_usage}}
\index{display\_usage@{display\_usage}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{display\_usage()}{display\_usage()}}
{\footnotesize\ttfamily \label{main_8cpp_a488d4a88ccc2c3c5ca06be00a4623e22} 
void display\+\_\+usage (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{prog}{}\end{DoxyParamCaption})}



Вывод инструкции по использованию программы. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em prog} & Имя программы. \\
\hline
\end{DoxyParams}
\Hypertarget{main_8cpp_a32eb7a5143a5670018a325c0baccb0b6}\index{main.cpp@{main.cpp}!encrypt\_with\_iv@{encrypt\_with\_iv}}
\index{encrypt\_with\_iv@{encrypt\_with\_iv}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{encrypt\_with\_iv()}{encrypt\_with\_iv()}}
{\footnotesize\ttfamily \label{main_8cpp_a32eb7a5143a5670018a325c0baccb0b6} 
std\+::vector$<$ unsigned char $>$ encrypt\+\_\+with\+\_\+iv (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ unsigned char $>$ \&}]{plaintext}{, }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{k}{, }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{iv}{}\end{DoxyParamCaption})}



Шифрование данных с использованием AES-\/256 и записью IV в начало зашифрованного файла. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em plaintext} & Открытый текст, который нужно зашифровать. \\
\hline
\mbox{\texttt{ in}}  & {\em k} & Ключ для шифрования. \\
\hline
\mbox{\texttt{ in}}  & {\em iv} & Инициализационный вектор (IV) для шифрования. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Вектор с зашифрованными данными, включая IV в начале. 
\end{DoxyReturn}
\Hypertarget{main_8cpp_af41542723b81cb91043ed4bab58d2239}\index{main.cpp@{main.cpp}!generate\_key\_from\_password@{generate\_key\_from\_password}}
\index{generate\_key\_from\_password@{generate\_key\_from\_password}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{generate\_key\_from\_password()}{generate\_key\_from\_password()}}
{\footnotesize\ttfamily \label{main_8cpp_af41542723b81cb91043ed4bab58d2239} 
void generate\+\_\+key\+\_\+from\+\_\+password (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{pwd}{, }\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{k}{}\end{DoxyParamCaption})}



Генерация ключа из пароля с использованием PBKDF2 и хэша SHA1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em pwd} & Пароль, который используется для генерации ключа. \\
\hline
\mbox{\texttt{ out}}  & {\em k} & Буфер для сохранения сгенерированного ключа длиной KEY\+\_\+\+LENGTH. \\
\hline
\end{DoxyParams}
\texorpdfstring{$<$}{<} Зерно для PBKDF2.\Hypertarget{main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\index{main.cpp@{main.cpp}!main@{main}}
\index{main@{main}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{main_8cpp_a0ddf1224851353fc92bfbff6f499fa97} 
int main (\begin{DoxyParamCaption}\item[{int}]{argc}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{argv}{\mbox{[}$\,$\mbox{]}}\end{DoxyParamCaption})}



Основная функция программы для шифрования и дешифрования файлов с использованием AES-\/256. 

Функция принимает аргументы командной строки для выбора режима работы (шифрование или дешифрование), а также для указания входного и выходного файлов, и пароля для генерации ключа.


\begin{DoxyParams}{Parameters}
{\em argc} & Количество аргументов командной строки. \\
\hline
{\em argv} & Массив аргументов командной строки.
\begin{DoxyItemize}
\item {\ttfamily -\/e} для шифрования.
\item {\ttfamily -\/d} для дешифрования.
\item {\ttfamily -\/i} путь к входному файлу.
\item {\ttfamily -\/o} путь к выходному файлу.
\item {\ttfamily -\/p} пароль для генерации ключа.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Код завершения программы.
\begin{DoxyItemize}
\item {\ttfamily 0} если операция завершена успешно.
\item {\ttfamily 1} если произошла ошибка в аргументах или процессе выполнения. 
\end{DoxyItemize}
\end{DoxyReturn}
\Hypertarget{main_8cpp_a2a8ae79f079ab100a788761235fae141}\index{main.cpp@{main.cpp}!read\_file@{read\_file}}
\index{read\_file@{read\_file}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{read\_file()}{read\_file()}}
{\footnotesize\ttfamily \label{main_8cpp_a2a8ae79f079ab100a788761235fae141} 
std\+::vector$<$ unsigned char $>$ read\+\_\+file (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{fname}{}\end{DoxyParamCaption})}



Чтение данных из файла в бинарном режиме. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fname} & Имя файла для чтения. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Вектор данных, прочитанных из файла. 
\end{DoxyReturn}
\Hypertarget{main_8cpp_a2eeacbb4857eccecbc944de27f7aadaf}\index{main.cpp@{main.cpp}!saveFile@{saveFile}}
\index{saveFile@{saveFile}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{saveFile()}{saveFile()}}
{\footnotesize\ttfamily \label{main_8cpp_a2eeacbb4857eccecbc944de27f7aadaf} 
void save\+File (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{fname}{, }\item[{const std\+::vector$<$ unsigned char $>$ \&}]{data}{}\end{DoxyParamCaption})}



Запись данных в файл в бинарном режиме. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em fname} & Имя файла для записи. \\
\hline
\mbox{\texttt{ in}}  & {\em data} & Данные для записи в файл. \\
\hline
\end{DoxyParams}
